<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ã²ã‚‰ãŒãª ë°œìŒ ê²Œì„ ğŸ¤</title>
  <style>
    body { font-family: 'Arial', sans-serif; text-align: center; background-color: #e8f4ff; padding: 40px; }
    .card {
      font-size: 100px;
      border: 2px solid #333;
      display: inline-block;
      padding: 30px;
      border-radius: 20px;
      background-color: #fff;
      margin-bottom: 20px;
    }
    .score, .result {
      font-size: 20px;
      margin-top: 20px;
      font-weight: bold;
    }
    button {
      padding: 10px 20px;
      font-size: 18px;
      margin: 10px;
    }
    .level {
      font-size: 18px;
      color: #0055aa;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h1>ğŸ¤ ã²ã‚‰ãŒãª ë°œìŒ ê²Œì„</h1>
<p>ì œì‹œëœ íˆë¼ê°€ë‚˜ë¥¼ ë§ˆì´í¬ì— ëŒ€ê³  <strong>ë¡œë§ˆì ë°œìŒ</strong>ìœ¼ë¡œ ë§í•´ ë³´ì„¸ìš”!</p>

<div class="card" id="kanaCard">ã‚</div>
<br>
<button onclick="startRecognition()">ğŸ™ï¸ ë°œìŒ ì‹œì‘</button>

<div class="result" id="resultBox">ğŸ§ ì¸ì‹ ëŒ€ê¸° ì¤‘...</div>
<div class="score" id="scoreBox">ì ìˆ˜: 0ì </div>
<div class="level" id="levelBox">ë ˆë²¨: 1</div>

<script>
  const kanaList = [
    { kana: "ã‚", romaji: "a" }, { kana: "ã„", romaji: "i" }, { kana: "ã†", romaji: "u" },
    { kana: "ãˆ", romaji: "e" }, { kana: "ãŠ", romaji: "o" }, { kana: "ã‹", romaji: "ka" },
    { kana: "ã", romaji: "ki" }, { kana: "ã", romaji: "ku" }, { kana: "ã‘", romaji: "ke" },
    { kana: "ã“", romaji: "ko" }, { kana: "ã•", romaji: "sa" }, { kana: "ã—", romaji: "shi" },
    { kana: "ã™", romaji: "su" }, { kana: "ã›", romaji: "se" }, { kana: "ã", romaji: "so" }
  ];

  let score = 0;
  let level = 1;
  let currentKana = {};

  function getRandomKana() {
    const index = Math.floor(Math.random() * kanaList.length);
    currentKana = kanaList[index];
    document.getElementById('kanaCard').textContent = currentKana.kana;
    document.getElementById('resultBox').textContent = "ğŸ§ ì¸ì‹ ëŒ€ê¸° ì¤‘...";
  }

  function startRecognition() {
    if (!('webkitSpeechRecognition' in window)) {
      alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í¬ë¡¬ì„ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.");
      return;
    }

    const recognition = new webkitSpeechRecognition();
    recognition.lang = 'en-US'; // ë¡œë§ˆì ì¸ì‹ìš© ì˜ì–´ ì„¤ì •
    recognition.interimResults = false;
    recognition.maxAlternatives = 1;

    recognition.onstart = () => {
      document.getElementById('resultBox').textContent = "ğŸ™ï¸ ë“£ëŠ” ì¤‘...";
    };

    recognition.onresult = (event) => {
      const spoken = event.results[0][0].transcript.trim().toLowerCase();
      const correct = currentKana.romaji;

      if (spoken === correct) {
        score += 10;
        document.getElementById('resultBox').textContent = `âœ… ì •ë‹µ! "${spoken}" (+10ì )`;
      } else {
        score -= 5;
        document.getElementById('resultBox').textContent = `âŒ ì˜¤ë‹µ. "${spoken}" (ì •ë‹µ: ${correct}) (-5ì )`;
      }

      level = Math.floor(score / 50) + 1;
      document.getElementById('scoreBox').textContent = `ì ìˆ˜: ${score}ì `;
      document.getElementById('levelBox').textContent = `ë ˆë²¨: ${level}`;
      setTimeout(getRandomKana, 1500);
    };

    recognition.onerror = (event) => {
      document.getElementById('resultBox').textContent = "âš ï¸ ì˜¤ë¥˜ ë°œìƒ: " + event.error;
    };

    recognition.start();
  }

  // ì‹œì‘ ì‹œ ì²« ë¬¸ì œ ë¡œë“œ
  getRandomKana();
</script>

</body>
</html>
